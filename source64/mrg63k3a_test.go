package source64_test

import (
	"github.com/jtejido/grand"
	"github.com/jtejido/grand/source64"
	"testing"
)

func TestMRG63k3A(t *testing.T) {
	rng, err := source64.NewMRG63k3AFromStream([]uint64{123456789, 123456789, 123456789, 123456789, 123456789, 123456789})

	if err != nil {
		t.Errorf("Error occured.")
	}

	r := grand.New(rng)

	expected := []uint64{
		15160845846450731929,
		17808790114850713731,
		16456768463916757596,
		12153693498324097387,
		9649373214932561355,
		8485826326454122203,
		3576485657889479526,
		6941470033850937557,
		4857612881914713316,
		6727602721735637138,
		14337893599803255674,
		618380086247241420,
		6850069792480451340,
		13626400191019467078,
		6088401316493404632,
		7279239965508080771,
		5141778009094628055,
		17954733604142588888,
		5565135912070580361,
		1348560928649223391,
		2694896070297646687,
		8711687280880919332,
		8673305014046684826,
		2396375273343316152,
		16471315253755797148,
		11739983727506535226,
		10568166919951327033,
		1444824802906215316,
		1863508920366690301,
		3536498374689800047,
		13856278515189988217,
		10943887400049578427,
		11786698124677060611,
		475686528489845201,
		137419748601211890,
		14206868851522322940,
		1341837747783109950,
		6735748530599225532,
		2344274004031400490,
		14215354304086661818,
		8654668899225358382,
		9263983670511731824,
		9868758613196225699,
		7124503975262143714,
		6436395875102434686,
		4950550708831738457,
		13761740040893238231,
		3472021673784742232,
		3876004832340178559,
		15372983269732877506,
		8369508381746377980,
		2017307682392891161,
		4601620097929249013,
		4448944451123365398,
		7525919168564393155,
		8667770390495731573,
		14532008652474605622,
		508021228021433963,
		7772257966702687427,
		9082672421650472875,
		7898452538941996247,
		12028219155069815979,
		1595326258847658822,
		7496339144737660063,
		9176434609754651478,
		8682458805896101170,
		10530199572082866677,
		12179477978100434447,
		17291590518035920621,
		10070332440158569606,
		8630339063088287963,
		7726123685942773768,
		2450902717609472785,
		17155956985286058707,
		8428323597706432278,
		3257403903323190832,
		18402810528285814130,
		16359493174429117983,
		17371730856672127709,
		493108725342170818,
		16555441187792889817,
		1027781351128861317,
		16293517635124938818,
		10063007778732298182,
		8390222550214841354,
		6337780206608510262,
		6879834718135520767,
		3730657861791888355,
		6464520216689430666,
		8162616621559370102,
		6774386788553846528,
		15704190911697089382,
		3342416314144103597,
		7424434639470196263,
		2759387456523859308,
		1265073208610522017,
		11791353643525815797,
		13221731812264592675,
		9082110260997114203,
		2044877234658273681,
	}

	for i := 0; i < len(expected); i++ {
		rg := r.Uint64()
		if expected[i] != rg {
			t.Errorf("Mismatch. want: %v, got: %v", expected[i], rg)
		}
	}

}
