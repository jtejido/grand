package source32_test

import (
	"github.com/jtejido/grand"
	"github.com/jtejido/grand/source32"
	"testing"
)

func TestMRG32k3A(t *testing.T) {
	rng, err := source32.NewMRG32k3AFromStream([]uint32{12345, 12345, 12345, 12345, 12345, 12345})

	if err != nil {
		t.Errorf("Error occured.")
	}

	r := grand.New(rng)

	expected := []uint32{
		545439821,
		2217652485,
		775547001,
		2821471974,
		3536978150,
		2115975878,
		715171321,
		850386448,
		3275228368,
		304070151,
		3857586390,
		397621607,
		3362674056,
		3559857824,
		2169451089,
		3431565287,
		1070718423,
		2016234167,
		591105721,
		2335831984,
		2326567728,
		1131218503,
		2003341703,
		1829109302,
		464671897,
		3632591168,
		1978174432,
		1059356967,
		2731181030,
		3282610566,
		3516908328,
		4233196368,
		1480040336,
		1167104950,
		508632726,
		1341784022,
		2424207368,
		2068334048,
		1367822912,
		3884104598,
		757999814,
		3864712486,
		566742632,
		3551416560,
		3640721392,
		2038498294,
		75025014,
		470162806,
		543351368,
		3991772288,
		594273440,
		1685805270,
		2318699430,
		825945286,
		2713423784,
		1722699920,
		411507792,
		3297271350,
		717771862,
		3182327574,
		1875997320,
		2464134432,
		3615204096,
		3676993558,
		3827657862,
		1720062054,
		1891559144,
		2633052720,
		2217104560,
		1570556534,
		3663625270,
		2753113270,
		3157788872,
		3967504320,
		4076465504,
		430455126,
		1198426982,
		163274758,
		2508305448,
		2878911952,
		1161365776,
		3716180150,
		4126147094,
		4258160214,
		643859720,
		2133797984,
		1934107584,
		2435366038,
		1954785350,
		475790246,
		3984578408,
		3915946864,
		2664929648,
		31545590,
		1302832630,
		444083190,
		1490077512,
		3483110144,
		1386587680,
		35398102,
	}

	for i := 0; i < len(expected); i++ {
		rg := r.Uint32()
		if expected[i] != rg {
			t.Errorf("Mismatch. want: %v, got: %v", expected[i], rg)
		}
	}

}
