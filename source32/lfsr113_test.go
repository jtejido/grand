package source32_test

import (
	"github.com/jtejido/grand"
	"github.com/jtejido/grand/source32"
	"testing"
)

func TestLFSR113(t *testing.T) {
	rng, err := source32.NewLFSR113FromStream([]uint32{12345, 12345, 12345, 12345})

	if err != nil {
		t.Errorf("Error occured.")
	}

	r := grand.New(rng)

	expected := []uint32{
		3338197162,
		227261592,
		1979908174,
		147202595,
		2208502443,
		1347239434,
		3683394166,
		1174257319,
		1698181671,
		3163800684,
		1855882835,
		1084575772,
		878026907,
		1697336160,
		4090095935,
		3264520446,
		1005630792,
		3520512008,
		1599770963,
		650260948,
		41713379,
		1453454241,
		3291332671,
		1806077651,
		3743198383,
		2311835392,
		2744762940,
		837356726,
		2074024353,
		1410810379,
		252107050,
		3893916947,
		1695742958,
		2251045144,
		3735580681,
		3182263519,
		1796607479,
		482461192,
		1636944849,
		1883428556,
		951628832,
		4278886604,
		3803517715,
		863043474,
		599304409,
		2856760009,
		2525912712,
		2964444471,
		4013696939,
		51884195,
		1581788975,
		3278731206,
		3466413496,
		2842660295,
		3881634902,
		3347167106,
		687964421,
		147479220,
		2469232184,
		2371025084,
		888961913,
		1772145572,
		2015093825,
		3867452382,
		3221148839,
		1692465838,
		3234195796,
		3389465600,
		2315031358,
		219084867,
		516996318,
		2834037093,
		4252846861,
		1306564426,
		2781298113,
		1026937536,
		489977248,
		1159234648,
		137770048,
		479906293,
		2483747368,
		3213607346,
		3814966044,
		2266900020,
		2067520172,
		322378729,
		267982581,
		4101852481,
		2960917960,
		1929720349,
		1151032509,
		4276231923,
		2355060153,
		1286103289,
		1398803040,
		2481338709,
		3105017988,
		2642241319,
		863344972,
		2111095877,
	}

	for i := 0; i < len(expected); i++ {
		rg := r.Uint32()
		if expected[i] != rg {
			t.Errorf("Mismatch. want: %v, got: %v", expected[i], rg)
		}
	}

}
